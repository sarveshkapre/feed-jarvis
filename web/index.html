<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Feed Jarvis Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:wght@500;700&family=Sora:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="brand">
        <div class="brand-title">Feed Jarvis Studio</div>
        <div class="brand-subtitle">A calm workspace for turning feeds into ready-to-post drafts.</div>
      </div>
      <nav class="nav">
        <a class="active" href="/">Studio</a>
        <a href="/about">About</a>
        <a
          href="https://github.com/sarveshkapre/feed-jarvis"
          target="_blank"
          rel="noreferrer noopener"
          >GitHub</a
        >
      </nav>
    </header>

    <main>
      <section class="hero">
        <h1>Turn fresh updates into on-brand social drafts in minutes.</h1>
        <p>
          Feed Jarvis Studio pairs your RSS or JSON feeds with personas that keep your voice consistent.
          Review, edit, and export posts in one focused flow.
        </p>
        <div class="badges">
          <span class="badge">Local-first</span>
          <span class="badge">RSS + JSON</span>
          <span class="badge">Persona presets</span>
          <span class="badge">Multi-channel</span>
          <span class="badge">Draft-ready output</span>
        </div>
      </section>

      <section class="grid">
        <article class="card" id="step-items">
          <div class="card-header">
            <div>
              <div class="step-chip">Step 1 · Bring items in</div>
              <h2>Choose a source</h2>
              <p>Start with one or more feed URLs, or paste your event list.</p>
            </div>
            <div class="toggle" role="tablist">
              <button type="button" class="active" data-source="feed">Feed URL(s)</button>
              <button type="button" data-source="json">Paste JSON</button>
            </div>
          </div>
          <div class="controls" data-panel="feed">
            <label for="feedUrls">
              Feed URLs
              <span>One per line. We auto-allow each host for safety.</span>
            </label>
            <textarea
              id="feedUrls"
              placeholder="https://example.com/rss.xml\nhttps://news.example.com/atom.xml"
            ></textarea>
            <div class="inline-row">
              <label for="maxItems">Max items</label>
              <input id="maxItems" type="number" min="1" value="20" />
              <label class="switch">
                <input id="dedupe" type="checkbox" checked />
                Dedupe by URL
              </label>
            </div>
            <div class="button-row">
              <button class="primary" id="fetchBtn">Fetch items</button>
              <span class="kbd">Ctrl / Cmd + Enter</span>
            </div>
            <div class="status" id="itemsStatus" role="status" aria-live="polite"></div>
          </div>
          <div class="controls" data-panel="json" hidden>
            <label for="jsonItems">
              Items JSON
              <span>Paste a JSON array of {"title", "url"} objects.</span>
            </label>
            <textarea
              id="jsonItems"
              placeholder='[{"title":"Hello world","url":"https://example.com"}]'
            ></textarea>
            <div class="button-row">
              <button class="primary" id="loadJsonBtn">Load items</button>
            </div>
            <div class="status" id="jsonStatus" role="status" aria-live="polite"></div>
          </div>
          <div class="filters">
            <h3>Filter items (optional)</h3>
            <div class="filter-grid">
              <label for="filterInclude">Include keywords</label>
              <input
                id="filterInclude"
                type="text"
                placeholder="release, launch, pricing"
                autocomplete="off"
              />
              <label for="filterExclude">Exclude keywords</label>
              <input
                id="filterExclude"
                type="text"
                placeholder="hiring, podcast, recap"
                autocomplete="off"
              />
              <label for="filterMinTitleLength">Min title length</label>
              <input id="filterMinTitleLength" type="number" min="0" value="0" />
            </div>
            <p class="filter-help">
              Matches are case-insensitive. Include matches any keyword. Exclude wins.
            </p>
            <div class="status" id="filterStatus" role="status" aria-live="polite"></div>
          </div>
          <div class="preview" aria-live="polite">
            <h3>Items preview</h3>
            <div class="empty" id="itemsEmpty">No items yet. Add a feed to see results.</div>
            <ul id="itemsList"></ul>
          </div>
        </article>

        <article class="card" id="step-persona">
          <div class="card-header">
            <div>
              <div class="step-chip">Step 2 · Set the voice</div>
              <h2>Select a persona</h2>
              <p>Choose a preset, then tune it with your own prefix if needed.</p>
            </div>
          </div>
          <div class="controls">
            <label for="personaSelect">
              Persona
              <span>Presets ship with a short prefix that sets the tone.</span>
            </label>
            <select id="personaSelect"></select>
            <label class="switch">
              <input id="customPersonaToggle" type="checkbox" />
              Use a custom persona
            </label>
            <div class="inline-row" id="customPersonaFields" hidden>
              <label for="customPersonaName">Custom name</label>
              <input id="customPersonaName" type="text" placeholder="Creator" />
              <label for="customPersonaPrefix">Custom prefix</label>
              <input id="customPersonaPrefix" type="text" placeholder="Creator:" />
            </div>
            <div class="persona-grid" id="personaCards"></div>
          </div>
        </article>

        <article class="card" id="step-generate">
          <div class="card-header">
            <div>
              <div class="step-chip">Step 3 · Review drafts</div>
              <h2>Generate and edit posts</h2>
              <p>Drafts are ready to export. Edit inline and keep an eye on length.</p>
            </div>
          </div>
          <div class="controls">
            <label>
              Channel
              <span>Choose the destination. We set a sensible max length.</span>
            </label>
            <div class="toggle" id="channelToggle">
              <button type="button" class="active" data-channel="x">X</button>
              <button type="button" data-channel="linkedin">LinkedIn</button>
              <button type="button" data-channel="newsletter">Newsletter</button>
            </div>
            <label for="templateSelect">
              Style
              <span>Pick a framing cue for the draft.</span>
            </label>
            <select id="templateSelect">
              <option value="straight">Straight</option>
              <option value="takeaway">Takeaway</option>
              <option value="cta">Call to action</option>
            </select>
            <div class="inline-row">
              <label for="maxChars">Max characters</label>
              <input id="maxChars" type="number" min="1" value="280" />
            </div>
            <div class="button-row">
              <button class="primary" id="generateBtn">Generate posts</button>
              <button class="secondary" id="copyAllBtn" disabled>Copy all</button>
              <button class="ghost" id="downloadTxtBtn" disabled>Download .txt</button>
              <button class="ghost" id="downloadJsonBtn" disabled>Download .jsonl</button>
              <button class="ghost" id="downloadCsvBtn" disabled>Download .csv</button>
            </div>
            <div class="status" id="postsStatus" role="status" aria-live="polite"></div>
          </div>
          <div class="preview">
            <h3>Drafts</h3>
            <div class="empty" id="postsEmpty">Generate drafts to see them here.</div>
            <div class="posts" id="postsList"></div>
          </div>
        </article>
      </section>

      <section class="footer">
        <div>Built for social teams who value speed and consistency.</div>
        <div>Shortcuts: <span class="kbd">Ctrl / Cmd + Enter</span> to fetch</div>
      </section>
    </main>

    <script type="module" src="/app.js"></script>
  </body>
</html>
